import{_ as j,d as U,u as D,a as G,b as T,c as F,e as N,r as s,o as c,f as g,w as t,g as n,h as B,i as a,t as l,n as E,j as x,k as u,l as d}from"./entry-710cb5a5.mjs";import{u as P}from"./useTable-eea46825.mjs";import{u as I}from"./useGroup-f6676ae0.mjs";const L=U({__name:"index",setup(A,{expose:_}){_();const z=D(),o=G(),k=T();k.fetch();const S=F(),{table:r,filterTable:h,scrollToTop:C}=P(),{getApproximateMembersCount:v,deleteGroup:b,showEditGroupDialog:f}=I(),m=N(()=>k.groups.filter(y=>r.selectedCategories.length?y.category&&r.selectedCategories.some(p=>{var q;return(q=y.category)==null?void 0:q.includes(p)}):y)),w={runtimeConfig:z,user:o,sections:k,$q:S,table:r,filterTable:h,scrollToTop:C,getApproximateMembersCount:v,deleteGroup:b,showEditGroupDialog:f,filteredSections:m};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),M=a("p",{class:"q-ma-none"}," Autorzy: Grzegorz Perun & Daniel Nguyen ",-1),W={class:"text-grey q-mr-xs"},J={key:0,class:"text-secondary q-mr-xs"},O={key:1,class:"text-secondary q-mr-xs"},Q=a("del",null,"JBWA",-1),R=[Q],H={class:"q-mr-xs"},K=d("Usu\u0144 grup\u0119"),X=d("Edytuj dane grupy"),Y=["id","href"],Z={class:"text-grey q-mr-xs"},$={key:0,class:"text-secondary q-mr-xs"},ee={key:1,class:"text-secondary q-mr-xs"},oe=a("del",null,"JBWA",-1),te=[oe],ne={class:"q-mr-xs"},le=["id","href"];function se(A,_,z,o,k,S){const r=s("q-icon"),h=s("q-spinner"),C=s("q-input"),v=s("q-select"),b=s("q-tooltip"),f=s("q-td"),m=s("q-item-label"),w=s("q-item-section"),y=s("q-item"),p=s("q-list"),q=s("q-card"),V=s("q-table");return c(),g(V,{pagination:o.table.pagination,"onUpdate:pagination":[_[2]||(_[2]=e=>o.table.pagination=e),o.scrollToTop],"binary-state-sort":"",color:"secondary",columns:o.table.columns,grid:o.$q.platform.is.mobile,rows:o.filteredSections,dense:"",filter:o.table.search,"filter-method":o.filterTable,flat:"",loading:!o.sections.groups.length,"rows-per-page-options":[],"visible-columns":["name","members","link","category"]},{"top-left":t(()=>[n(C,{modelValue:o.table.search,"onUpdate:modelValue":_[0]||(_[0]=e=>o.table.search=e),modelModifiers:{trim:!0},class:"q-mb-sm",color:"secondary",debounce:500,dense:"",label:"Wyszukiwarka grup",loading:!o.sections.groups.length,readonly:!o.sections.groups.length},B({loading:t(()=>[n(h)]),_:2},[o.sections.groups.length>0?{name:"append",fn:t(()=>[n(r,{name:"search"})])}:void 0]),1032,["modelValue","loading","readonly"]),n(v,{modelValue:o.table.selectedCategories,"onUpdate:modelValue":_[1]||(_[1]=e=>o.table.selectedCategories=e),class:"q-mb-sm",color:"secondary",dense:"",label:"Poka\u017C kategorie",loading:!o.sections.groups.length,multiple:"",options:o.sections.categories,"options-dense":"","options-selected-class":"text-secondary",readonly:!o.sections.groups.length},{loading:t(()=>[n(h)]),_:1},8,["modelValue","loading","options","readonly"]),M,a("p",{class:E(["q-mb-sm",{"text-transparent":!o.sections.lastUpdateDate.length}])}," Ostatnia aktualizacja: "+l(o.sections.lastUpdateDate),3)]),"body-cell-name":t(e=>[n(f,{props:e},{default:t(()=>[a("small",W,l(e.row.index)+". ",1),e.row.members?(c(),x("small",J,l(o.getApproximateMembersCount(e.row.members)),1)):u("",!0),e.row.isSection===!1?(c(),x("small",O,R)):u("",!0),a("span",H,[d(l(e.row.name)+" ",1),o.user.isLoggedIn?(c(),g(r,{key:0,class:"cursor-pointer",size:"16px",color:"secondary",name:e.row.isFavourite?"star":"star_border",onClick:i=>o.sections.toggleFavourite(e.row.link,e.row.isFavourite)},{default:t(()=>[n(b,null,{default:t(()=>[d(l(e.row.isFavourite?"Usu\u0144 grup\u0119 z ulubionych":"Dodaj grup\u0119 do ulubionych"),1)]),_:2},1024)]),_:2},1032,["name","onClick"])):u("",!0),o.user.isLoggedIn&&o.user.isAdmin?(c(),g(r,{key:1,size:"16px",class:"cursor-pointer",color:"secondary",name:"delete_forever",onClick:i=>o.deleteGroup("sections",e.row.link)},{default:t(()=>[n(b,null,{default:t(()=>[K]),_:1})]),_:2},1032,["onClick"])):u("",!0),n(r,{color:"secondary",class:"cursor-pointer",name:"mode_edit_outline",size:"16px",onClick:i=>o.showEditGroupDialog(e.row,o.runtimeConfig.public.sectionsPath)},{default:t(()=>[n(b,null,{default:t(()=>[X]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),"body-cell-members":t(e=>[n(f,{props:e},{default:t(()=>[a("span",null,l(e.row.members!==0?e.row.members:"N/A"),1)]),_:2},1032,["props"])]),"body-cell-link":t(e=>[n(f,{props:e},{default:t(()=>[a("a",{id:e.row.name.split(" ").join("@"),class:"text-secondary",href:`https://facebook.com/groups/${e.row.link}`,rel:"noopener noreferrer",target:"_blank"}," /"+l(e.row.link),9,Y)]),_:2},1032,["props"])]),"body-cell-category":t(e=>[n(f,{props:e},{default:t(()=>{var i;return[a("span",null,l((i=e.row.category)==null?void 0:i.join(", ")),1)]}),_:2},1032,["props"])]),"body-cell-keywords":t(()=>[]),item:t(e=>[n(q,{class:"col-12 q-mb-md",flat:"",props:e},{default:t(()=>[n(p,{dense:""},{default:t(()=>[n(y,null,{default:t(()=>[n(w,null,{default:t(()=>[n(m,{caption:""},{default:t(()=>[d(l(e.cols[0].label),1)]),_:2},1024),n(m,null,{default:t(()=>[a("small",Z,l(e.row.index)+".",1),e.row.members?(c(),x("small",$,l(o.getApproximateMembersCount(e.row.members)),1)):u("",!0),e.row.isSection===!1?(c(),x("small",ee,te)):u("",!0),a("span",ne,[d(l(e.row.name)+" ",1),o.user.isLoggedIn?(c(),g(r,{key:0,class:"cursor-pointer",size:"16px",color:"secondary",name:e.row.isFavourite?"star":"star_border",onClick:i=>o.sections.toggleFavourite(e.row.link,e.row.isFavourite)},null,8,["name","onClick"])):u("",!0),n(r,{color:"secondary",name:"mode_edit_outline",size:"16px",onClick:i=>o.showEditGroupDialog(e.row,o.runtimeConfig.public.sectionsPath)},null,8,["onClick"]),o.user.isLoggedIn&&o.user.isAdmin?(c(),g(r,{key:1,size:"16px",class:"cursor-pointer",color:"secondary",name:"delete_forever",onClick:i=>o.deleteGroup("sections",e.row.link)},null,8,["onClick"])):u("",!0)])]),_:2},1024),n(m,{caption:""},{default:t(()=>[d(l(e.cols[1].label),1)]),_:2},1024),n(m,null,{default:t(()=>[d(l(e.row.members!==0?e.row.members:"N/A"),1)]),_:2},1024),n(m,{caption:""},{default:t(()=>[d(l(e.cols[2].label),1)]),_:2},1024),n(m,null,{default:t(()=>[a("a",{id:e.row.name.split(" ").join("@"),class:"text-secondary",href:`https://facebook.com/groups/${e.cols[1].value}`,rel:"noopener noreferrer",target:"_blank"},"/"+l(e.cols[2].value),9,le)]),_:2},1024),e.cols[3].value?(c(),g(m,{key:0,caption:""},{default:t(()=>[d(l(e.cols[3].label),1)]),_:2},1024)):u("",!0),e.cols[3].value?(c(),g(m,{key:1},{default:t(()=>{var i;return[d(l((i=e.cols[3].value)==null?void 0:i.join(", ")),1)]}),_:2},1024)):u("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["pagination","columns","grid","rows","filter","filter-method","loading","onUpdate:pagination"])}var ce=j(L,[["render",se]]);export{ce as default};
